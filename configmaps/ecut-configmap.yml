apiVersion: v1
kind: ConfigMap
metadata:
  name: ecut
data:
  ECUT_C_IN.xsl: |
    <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:java="java" xmlns:men="http://www.bolivariano.com/mensaje/MensajeOTC" exclude-result-prefixes="men java">
        <xsl:template match="/">
            <CTSMessage>
                <CTSHeader>
                    <Field name="srv" type="S">
                        <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_srv&quot;]/valor"/>
                    </Field>
                    <Field name="ofi" type="N">
                        <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_ofi&quot;]/valor"/>
                    </Field>
                    <Field name="trn" type="N">62320</Field>
                    <Field name="serviceName" type="S">cob_procesador..fp_consulta_ecutel</Field>
                    <Field name="date" type="D">
                        <xsl:value-of select="java:format(java:text.SimpleDateFormat.new(&quot;MM/dd/yyyy&quot;), java:util.Date.new())"/>
                    </Field>
                    <Field name="term" type="S">
                        <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_term&quot;]/valor"/>
                    </Field>
                    <Field name="ssnLog" type="S">
                        <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_ssn&quot;]/valor"/>
                    </Field>
                    <Field name="rol" type="N">
                        <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_rol&quot;]/valor"/>
                    </Field>
                    <Field name="ssn" type="N">
                        <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_ssn&quot;]/valor"/>
                    </Field>
                    <Field name="ssn_branch " type="N">
                        <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_ssn&quot;]/valor"/>
                    </Field>
                    <Field name="user" type="S">
                        <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_user&quot;]/valor"/>
                    </Field>
                    <Field name="lsrv" type="S">
                        <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_lsrv&quot;]/valor"/>
                    </Field>
                </CTSHeader>
                <Data>
                    <ProcedureRequest>
                        <SpName>cob_procesador..fp_consulta_ecutel</SpName>
                        <Param name="@t_trn" type="56" io="0" len="4">62320</Param>
                        <xsl:choose>
                            <xsl:when test="/men:entradaConsultarDeuda/men:servicio/codigoTipoIdentificador = 'CED'">
                                <Param name="@i_ptipo_doc" type="39" io="0" len="3">002</Param>
                            </xsl:when>
                            <xsl:when test="/men:entradaConsultarDeuda/men:servicio/codigoTipoIdentificador = 'RUC'">
                                <Param name="@i_ptipo_doc" type="39" io="0" len="3">008</Param>
                            </xsl:when>
                            <xsl:otherwise>
                                <Param name="@i_ptipo_doc" type="39" io="0" len="3">007</Param>
                            </xsl:otherwise>
                        </xsl:choose>
                        <Param name="@i_pcodigo" type="39" io="0" len="10">
                            <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/identificador"/>
                        </Param>
                        <Param name="@i_pid_banco" type="39" io="0" len="3">003</Param>
                        <Param name="@i_pcanal" type="39" io="0" len="4">BVIR</Param>
                        <Param name="@o_pnombre" type="39" io="1" len="80">********************************************************************************</Param>
                        <Param name="@o_pvalor" type="39" io="1" len="80">********************************************************************************</Param>
                        <Param name="@o_pfecha_pago" type="39" io="1" len="80">********************************************************************************</Param>
                        <Param name="@o_pid_respuesta" type="39" io="1" len="80">********************************************************************************</Param>
                        <Param name="@o_msg" type="39" io="1" len="80">********************************************************************************</Param>
                        <Param name="@i_ubi" type="56" io="0" len="4">0</Param>
                        <Param name="@s_user" type="39" io="0" len="7">
                            <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_user&quot;]/valor"/>
                        </Param>
                        <Param name="@s_srv" type="39" io="0" len="8">
                            <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_srv&quot;]/valor"/>
                        </Param>
                        <Param name="@s_rol" type="56" io="0" len="4">
                            <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_rol&quot;]/valor"/>
                        </Param>
                        <Param name="@s_ofi" type="56" io="0" len="4">
                            <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_ofi&quot;]/valor"/>
                        </Param>
                        <Param name="@s_term" type="39" io="0" len="10">
                            <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_term&quot;]/valor"/>
                        </Param>
                        <Param name="@s_ssn" type="56" io="0" len="4">
                            <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_ssn&quot;]/valor"/>
                        </Param>
                        <Param name="@s_ssn_branch" type="56" io="0" len="4">
                            <xsl:value-of select="/men:entradaConsultarDeuda/men:servicio/datosAdicionales/datoAdicional[codigo = &quot;s_ssn&quot;]/valor"/>
                        </Param>
                    </ProcedureRequest>
                </Data>
            </CTSMessage>
        </xsl:template>
    </xsl:stylesheet>
  ECUT_C_OUT.xsl: |
    <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:men="http://www.bolivariano.com/mensaje/MensajeOTC" exclude-result-prefixes="java">
        <xsl:template match="/">
            <men:salidaConsultarDeuda>
                <men:codigoError>
                    <xsl:value-of select="/CTSMessage/Data/ProcedureResponse/return/text()"/>
                </men:codigoError>
                <men:formaPago>
                    <xsl:text disable-output-escaping="no">ABONO</xsl:text>
                </men:formaPago>
                <men:mensajeUsuario>
                    <xsl:value-of select="/CTSMessage/Data/ProcedureResponse/Message/text()"/>
                </men:mensajeUsuario>
                <xsl:choose>
                    <xsl:when test="/CTSMessage/Data/ProcedureResponse/return = '0'">
                        <men:limiteMontoMaximo>
                            <xsl:value-of select="(/CTSMessage/Data/ProcedureResponse/OutputParams/param[@name='@o_pvalor']/text()) * (2.0)"/>
                        </men:limiteMontoMaximo>
                        <men:montoTotal>
                            <xsl:value-of select="/CTSMessage/Data/ProcedureResponse/OutputParams/param[@name='@o_pvalor']/text()"/>
                        </men:montoTotal>
                        <men:nombreCliente>
                            <xsl:value-of select="/CTSMessage/Data/ProcedureResponse/OutputParams/param[@name='@o_pnombre']/text()"/>
                        </men:nombreCliente>
                    </xsl:when>
                    <xsl:otherwise>
                        <men:montoTotal>0</men:montoTotal>
                        <men:nombreCliente></men:nombreCliente>
                    </xsl:otherwise>
                </xsl:choose>
            </men:salidaConsultarDeuda>
        </xsl:template>
    </xsl:stylesheet>
  ECUT_P_IN.xsl: |
    <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:java="java" xmlns:men="http://www.bolivariano.com/mensaje/MensajeOTC" exclude-result-prefixes="java men">
        <xsl:template match="/">
            <CTSMessage>
                <CTSHeader>
                    <Field name="srv" type="S">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_srv&quot;]/valor"/>
                    </Field>
                    <Field name="ofi" type="N">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_ofi&quot;]/valor"/>
                    </Field>
                    <Field name="trn" type="N">62322</Field>
                    <Field name="serviceName" type="S">cob_procesador..fp_pago_ecutel</Field>
                    <Field name="date" type="D">
                        <xsl:value-of select="java:format(java:text.SimpleDateFormat.new(&quot;MM/dd/yyyy&quot;), java:util.Date.new())"/>
                    </Field>
                    <Field name="term" type="S">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_term&quot;]/valor"/>
                    </Field>
                    <Field name="ssnLog" type="S">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_ssn&quot;]/valor"/>
                    </Field>
                    <Field name="rol" type="N">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_rol&quot;]/valor"/>
                    </Field>
                    <Field name="ssn" type="N">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_ssn&quot;]/valor"/>
                    </Field>
                    <Field name="ssn_branch " type="N">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_ssn&quot;]/valor"/>
                    </Field>
                    <Field name="user" type="S">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_user&quot;]/valor"/>
                    </Field>
                    <Field name="lsrv" type="S">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_lsrv&quot;]/valor"/>
                    </Field>
                </CTSHeader>
                <Data>
                    <ProcedureRequest>
                        <SpName>cob_procesador..fp_pago_ecutel</SpName>
                        <Param name="@s_user" type="47" io="0" len="6">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_user&quot;]/valor"/>
                        </Param>
                        <Param name="@t_corr" type="47" io="0" len="1">N</Param>
                        <Param name="@t_trn" type="56" io="0" len="4">62322</Param>
                        <Param name="@i_mon" type="48" io="0" len="1">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:moneda"/>
                        </Param>
                        <Param name="@i_servicio" type="47" io="0" len="1">5</Param>
                        <Param name="@i_empresa" type="47" io="0" len="4">8521</Param>
                        <Param name="@i_servname" type="47" io="0" len="17">CLARO SERVICIOS FIJOS</Param>
                        <Param name="@i_empname" type="47" io="0" len="21">CLARO SERVICIOS FIJOS</Param>
                        <Param name="@i_efectivo" type="56" io="0" len="4">0</Param>
                        <Param name="@i_cheque" type="56" io="0" len="4">0</Param>
                        <Param name="@i_debito" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:valorPago"/>
                        </Param>
                        <Param name="@i_subtotal" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:valorPago"/>
                        </Param>
                        <Param name="@i_comision_tot" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:valorComision"/>
                        </Param>
                        <Param name="@i_comision_db" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:valorComision"/>
                        </Param>
                        <Param name="@i_comision_efe" type="56" io="0" len="4">0</Param>
                        <Param name="@i_comision_chq" type="56" io="0" len="4">0</Param>
                        <Param name="@i_total" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:valorPago"/>
                        </Param>
                        <Param name="@i_totval" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:valorPago"/>
                        </Param>
                        <Param name="@i_totapag" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:valorPago + /men:entradaEjecutarPago/men:valorComision"/>
                        </Param>
                        <Param name="@i_cant_cheques" type="56" io="0" len="4">0</Param>
                        <Param name="@i_tipo_cta" type="47" io="0" len="3">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:tipoCuenta"/>
                        </Param>
                        <Param name="@i_cuenta" type="47" io="0" len="10">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:cuenta"/>
                        </Param>
                        <Param name="@i_nombre_cta" type="47" io="0" len="32">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:nombreCliente"/>
                        </Param>
                        <Param name="@i_autoriza" type="47" io="0" len="1">0</Param>
                        <Param name="@i_canal" type="47" io="0" len="3">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:canal"/>
                        </Param>
                        <Param name="@i_cod_cliente" type="47" io="0" len="10">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:servicio/identificador"/>
                        </Param>
                        <Param name="@i_ruc_cliente type=39" io="0" len="0"/>
                        <Param name="@i_nombre_cliente" type="47" io="0" len="30">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:nombreCliente"/>
                        </Param>
                        <xsl:choose>
                            <xsl:when test="/men:entradaEjecutarPago/men:servicio/codigoTipoIdentificador = 'CED'">
                                <Param name="@i_ptipo_doc" type="47" io="0" len="5">002</Param>
                            </xsl:when>
                            <xsl:when test="/men:entradaEjecutarPago/men:servicio/codigoTipoIdentificador = 'RUC'">
                                <Param name="@i_ptipo_doc" type="47" io="0" len="5">008</Param>
                            </xsl:when>
                            <xsl:otherwise>
                                <Param name="@i_ptipo_doc" type="47" io="0" len="5">007</Param>
                            </xsl:otherwise>
                        </xsl:choose>
                        <Param name="@i_pcodigo" type="47" io="0" len="10">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:servicio/identificador"/>
                        </Param>
                        <Param name="@i_pvalor" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:valorPago"/>
                        </Param>
                        <Param name="@i_pfpago" type="47" io="0" len="3">001</Param>
                        <Param name="@i_pid_banco" type="47" io="0" len="3">003</Param>
                        <Param name="@i_pcanal" type="47" io="0" len="4">BVIR</Param>
                        <Param name="@i_pfecha_cont" type="47" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_date&quot;]/valor"/>
                        </Param>
                        <Param name="@i_pfecha_trx" type="47" io="0" len="17">
                            <xsl:value-of select="java:format(java:text.SimpleDateFormat.new(&quot;yyyyMMdd HH:mm:ss&quot;), java:util.Date.new())"/>
                        </Param>
                        <Param name="@i_psec_banco" type="56" io="0" len="4">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_ssn&quot;]/valor"/>
                        </Param>
                        <Param name="@s_ssn" type="56" io="0" len="4">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_ssn&quot;]/valor"/>
                        </Param>
                        <Param name="@o_fecha_contable" type="47" io="1" len="10">XXXXXXXXXX</Param>
                        <Param name="@o_ssn" type="56" io="1" len="4">0</Param>
                        <Param name="@o_autorisri" type="47" io="1" len="30">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</Param>
                        <Param name="@o_fecvensri" type="47" io="1" len="30">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</Param>
                        <Param name="@o_nota_venta" type="47" io="1" len="20">xxxxxxxxxxxxxxxxxxxx</Param>
                        <Param name="@o_fact_elect" type="47" io="1" len="1">x</Param>
                        <Param name="@o_cod_respuesta" type="47" io="1" len="10">xxxxxxxxxx</Param>
                        <Param name="@o_mensaje_respuesta" type="47" io="1" len="32">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</Param>
                        <Param name="@o_fec_ini_vig_aut" type="47" io="1" len="1">x</Param>
                        <Param name="@o_fec_fin_vig_aut" type="47" io="1" len="1">x</Param>
                        <Param name="@o_fecdessri" type="47" io="1" len="50">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</Param>
                        <Param name="@o_horario" type="47" io="1" len="1">x</Param>
                        <Param name="@o_pid_pago" type="47" io="1" len="1"/>
                        <Param name="@s_term" type="47" io="0" len="5">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_term&quot;]/valor"/>
                        </Param>
                        <Param name="@s_ofi" type="52" io="0" len="2">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_ofi&quot;]/valor"/>
                        </Param>
                        <Param name="@i_ubi" type="56" io="0" len="4">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;i_ubi&quot;]/valor"/>
                        </Param>
                        <Param name="@s_rol" type="52" io="0" len="2">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_rol&quot;]/valor"/>
                        </Param>
                        <Param name="@s_srv" type="47" io="0" len="10">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_srv&quot;]/valor"/>
                        </Param>
                    </ProcedureRequest>
                </Data>
            </CTSMessage>
        </xsl:template>
    </xsl:stylesheet>
  ECUT_P_OUT.xsl: |
    <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:java="java" xmlns:men="http://www.bolivariano.com/mensaje/MensajeOTC" exclude-result-prefixes="java">
        <xsl:template match="/">
            <men:salidaEjecutarPago>
                <men:codigoError>
                    <xsl:value-of select="/CTSMessage/Data/ProcedureResponse/return/text()"/>
                </men:codigoError>
                <xsl:choose>
                    <xsl:when test="/CTSMessage/Data/ProcedureResponse/ResultSet[1]/rw[3]/cd[2]/text()">
                        <men:mensajeUsuario>
                            <xsl:value-of select="/CTSMessage/Data/ProcedureResponse/ResultSet[1]/rw[3]/cd[2]/text()"/>
                        </men:mensajeUsuario>
                    </xsl:when>
                    <xsl:when test="/CTSMessage/Data/ProcedureResponse/Message/text()">
                        <men:mensajeUsuario>
                            <xsl:value-of select="/CTSMessage/Data/ProcedureResponse/Message/text()"/>
                        </men:mensajeUsuario>
                    </xsl:when>
                    <xsl:otherwise>
                        <men:mensajeUsuario>Error de infraestructura</men:mensajeUsuario>
                    </xsl:otherwise>
                </xsl:choose>
                <xsl:variable name="fechaContable" select="/CTSMessage/Data/ProcedureResponse/OutputParams/param[@name='@o_fecha_contable']"></xsl:variable>
                <men:fechaPago>
                    <xsl:value-of select="concat(substring($fechaContable,7,4),'-',substring($fechaContable,1,2),'-',substring($fechaContable,4,2),'T00:00:00')"/>
                </men:fechaPago>
                <men:fechaDebito>
                    <xsl:value-of select="java:format(java:text.SimpleDateFormat.new(&quot;yyyy-MM-dd&apos;T&apos;HH:mm:ss.SSS&quot;), java:util.Date.new())"/>
                </men:fechaDebito>
                <men:referencia>
                    <xsl:value-of select="/CTSMessage/Data/ProcedureResponse/OutputParams/param[@name='@o_ssn']"/>
                </men:referencia>
            </men:salidaEjecutarPago>
        </xsl:template>
    </xsl:stylesheet>
  ECUT_R_IN.xsl: |
    <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:java="java" xmlns:men="http://www.bolivariano.com/mensaje/MensajeOTC" exclude-result-prefixes="java men">
        <xsl:template match="/">
            <CTSMessage>
                <CTSHeader>
                    <Field name="srv" type="S">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_srv&quot;]/valor"/>
                    </Field>
                    <Field name="ofi" type="N">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_ofi&quot;]/valor"/>
                    </Field>
                    <Field name="trn" type="N">62322</Field>
                    <Field name="serviceName" type="S">cob_procesador..fp_pago_ecutel</Field>
                    <Field name="date" type="D">
                        <xsl:value-of select="java:format(java:text.SimpleDateFormat.new(&quot;MM/dd/yyyy&quot;), java:util.Date.new())"/>
                    </Field>
                    <Field name="term" type="S">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_term&quot;]/valor"/>
                    </Field>
                    <Field name="ssnLog" type="S">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_ssn&quot;]/valor"/>
                    </Field>
                    <Field name="rol" type="N">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_rol&quot;]/valor"/>
                    </Field>
                    <Field name="ssn" type="N">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_ssn&quot;]/valor"/>
                    </Field>
                    <Field name="ssn_branch " type="N">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_ssn&quot;]/valor"/>
                    </Field>
                    <Field name="user" type="S">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_user&quot;]/valor"/>
                    </Field>
                    <Field name="lsrv" type="S">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_lsrv&quot;]/valor"/>
                    </Field>
                    <Field name="t_rol" type="N">
                        <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_rol&quot;]/valor"/>
                    </Field>
                </CTSHeader>
                <Data>
                    <ProcedureRequest>
                        <SpName>cob_procesador..fp_pago_ecutel</SpName>
                        <Param name="@s_user" type="47" io="0" len="6">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_user&quot;]/valor"/>
                        </Param>
                        <Param name="@t_corr" type="47" io="0" len="1">S</Param>
                        <Param name="@t_trn" type="56" io="0" len="4">62322</Param>
                        <Param name="@i_mon" type="48" io="0" len="1">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:moneda"/>
                        </Param>
                        <Param name="@i_servicio" type="47" io="0" len="1">5</Param>
                        <Param name="@i_empresa" type="47" io="0" len="4">8521</Param>
                        <Param name="@i_servname" type="47" io="0" len="17">CLARO SERVICIOS FIJOS</Param>
                        <Param name="@i_empname" type="47" io="0" len="21">CLARO SERVICIOS FIJOS</Param>
                        <Param name="@i_efectivo" type="56" io="0" len="4">0</Param>
                        <Param name="@i_cheque" type="56" io="0" len="4">0</Param>
                        <Param name="@i_debito" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:valorPago"/>
                        </Param>
                        <Param name="@i_subtotal" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:valorPago"/>
                        </Param>
                        <Param name="@i_comision_tot" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:valorComision"/>
                        </Param>
                        <Param name="@i_comision_db" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:valorComision"/>
                        </Param>
                        <Param name="@i_comision_efe" type="56" io="0" len="4">0</Param>
                        <Param name="@i_comision_chq" type="56" io="0" len="4">0</Param>
                        <Param name="@i_total" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:valorPago"/>
                        </Param>
                        <Param name="@i_totval" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:valorPago"/>
                        </Param>
                        <Param name="@i_totapag" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:valorPago + /men:entradaEjecutarReverso/men:valorComision"/>
                        </Param>
                        <Param name="@i_cant_cheques" type="56" io="0" len="4">0</Param>
                        <Param name="@i_tipo_cta" type="47" io="0" len="3">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:tipoCuenta"/>
                        </Param>
                        <Param name="@i_cuenta" type="47" io="0" len="10">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:cuenta"/>
                        </Param>
                        <Param name="@i_nombre_cta" type="47" io="0" len="32">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:nombreCliente"/>
                        </Param>
                        <Param name="@i_autoriza" type="47" io="0" len="1">0</Param>
                        <Param name="@i_canal" type="47" io="0" len="3">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:canal"/>
                        </Param>
                        <Param name="@i_cod_cliente" type="47" io="0" len="10">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:servicio/identificador"/>
                        </Param>
                        <Param name="@i_ruc_cliente type=39" io="0" len="0"/>
                        <Param name="@i_nombre_cliente" type="47" io="0" len="30">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:nombreCliente"/>
                        </Param>
                        <xsl:choose>
                            <xsl:when test="/men:entradaEjecutarReverso/men:servicio/codigoTipoIdentificador = 'CED'">
                                <Param name="@i_ptipo_doc" type="47" io="0" len="5">002</Param>
                            </xsl:when>
                            <xsl:when test="/men:entradaEjecutarReverso/men:servicio/codigoTipoIdentificador = 'RUC'">
                                <Param name="@i_ptipo_doc" type="47" io="0" len="5">008</Param>
                            </xsl:when>
                            <xsl:otherwise>
                                <Param name="@i_ptipo_doc" type="47" io="0" len="5">007</Param>
                            </xsl:otherwise>
                        </xsl:choose>
                        <Param name="@i_pcodigo" type="47" io="0" len="10">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:servicio/identificador"/>
                        </Param>
                        <Param name="@i_pvalor" type="60" io="0" len="8">
                            <xsl:value-of select="/men:entradaEjecutarReverso/men:valorPago"/>
                        </Param>
                        <Param name="@i_pfpago" type="47" io="0" len="3">001</Param>
                        <Param name="@i_pid_banco" type="47" io="0" len="3">003</Param>
                        <Param name="@i_pcanal" type="47" io="0" len="4">BVIR</Param>
                        <Param name="@i_pfecha_cont" type="47" io="0" len="8">
                            <xsl:value-of select="java:format(java:text.SimpleDateFormat.new(&quot;yyyyMMdd&quot;), java:util.Date.new())"/>
                        </Param>
                        <Param name="@i_pfecha_trx" type="47" io="0" len="17">
                            <xsl:value-of select="java:format(java:text.SimpleDateFormat.new(&quot;yyyyMMdd HH:mm:ss&quot;), java:util.Date.new())"/>
                        </Param>
                        <Param name="@s_ssn" type="56" io="0" len="4">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_ssn&quot;]/valor"/>
                        </Param>
                        <Param name="@o_fecha_contable" type="47" io="1" len="10">XXXXXXXXXX</Param>
                        <Param name="@o_ssn" type="56" io="1" len="4">0</Param>
                        <Param name="@o_autorisri" type="47" io="1" len="30">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</Param>
                        <Param name="@o_fecvensri" type="47" io="1" len="30">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</Param>
                        <Param name="@o_nota_venta" type="47" io="1" len="20">xxxxxxxxxxxxxxxxxxxx</Param>
                        <Param name="@o_fact_elect" type="47" io="1" len="1">x</Param>
                        <Param name="@o_cod_respuesta" type="47" io="1" len="10">xxxxxxxxxx</Param>
                        <Param name="@o_mensaje_respuesta" type="47" io="1" len="32">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</Param>
                        <Param name="@o_fec_ini_vig_aut" type="47" io="1" len="1">x</Param>
                        <Param name="@o_fec_fin_vig_aut" type="47" io="1" len="1">x</Param>
                        <Param name="@o_fecdessri" type="47" io="1" len="50">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</Param>
                        <Param name="@o_horario" type="47" io="1" len="1">x</Param>
                        <Param name="@o_pid_pago" type="47" io="1" len="1"/>
                        <Param name="@s_term" type="47" io="0" len="5">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_term&quot;]/valor"/>
                        </Param>
                        <Param name="@s_ofi" type="52" io="0" len="2">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_ofi&quot;]/valor"/>
                        </Param>
                        <Param name="@i_ubi" type="52" io="0" len="2">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;i_ubi&quot;]/valor"/>
                        </Param>
                        <Param name="@s_rol" type="52" io="0" len="2">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_rol&quot;]/valor"/>
                        </Param>
                        <Param name="@s_srv" type="47" io="0" len="10">
                            <xsl:value-of select="/men:entradaEjecutarPago/men:datosAdicionales/men:datoAdicional[codigo = &quot;s_srv&quot;]/valor"/>
                        </Param>
                        <Param name="@t_ssn_corr" type="56" io="0" len="4">1234567017</Param>
                    </ProcedureRequest>
                </Data>
            </CTSMessage>
        </xsl:template>
    </xsl:stylesheet>
