<?xml version="1.0" encoding="UTF-8" ?>
<?oracle-xsl-mapper <!-- SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY. -->
  <mapSources>
    <source type="XSD">
      <schema location="../CEP.xsd"/>
      <rootElement name="MensajeSalidaPago" namespace="http://www.bolivariano.com/MensajeMunicipio"/>
    </source>
  </mapSources>
  <mapTargets>
    <target type="WSDL">
      <schema location="../otc-nopolicy.wsdl"/>
      <rootElement name="salidaEjecutarPago" namespace="http://www.bolivariano.com/ws/OTCService"/>
    </target>
  </mapTargets>
  <!-- GENERATED BY ORACLE XSL MAPPER 11.1.1.7.8(build 150622.2350.0222) AT [FRI MAY 25 18:06:35 COT 2018]. -->
?>
<xsl:stylesheet version="1.0"
                xmlns:mmn="http://www.bolivariano.com/MensajeMunicipio"
                xmlns:ns9="http://www.bolivariano.com/mensaje/MensajeOTC"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:java="java"
                exclude-result-prefixes="java xsl ns9 mmn">
  <xsl:template match="/">
    <xsl:choose>
      <xsl:when test="/mmn:MensajeSalidaPago/informacionCore/sec!=''">
        <ns9:salidaEjecutarPago>
          <ns9:codigoError>0</ns9:codigoError> 
          <ns9:fechaDebito>
          <xsl:value-of select='java:format(java:text.SimpleDateFormat.new("yyyy-MM-dd&apos;T&apos;HH:mm:ss"), java:util.Date.new())'/>
          </ns9:fechaDebito>
          <xsl:variable name="fechaC"
                        select="/mmn:MensajeSalidaPago/municipio/fechaContable"/>
          <ns9:fechaPago>
          <xsl:value-of select="concat(substring($fechaC,1,4),'-',substring($fechaC,5,2),'-',substring($fechaC,7,2) )"/> 
          </ns9:fechaPago>
          <!--<xsl:variable name="fechaP"
                        select="/mmn:MensajeSalidaPago/municipio/fechaEfectiva"/>
          <xsl:value-of select="concat(substring($fechaP,7,4),'-',substring($fechaP,1,2),'-',substring($fechaP,4,2) )"/> -->
         <ns9:datosAdicionales>
            <ns9:datoAdicional>
              <codigo>horario</codigo>
              <valor>
                <xsl:value-of select="/mmn:MensajeSalidaPago/municipio/horario"/>
              </valor>
            </ns9:datoAdicional>
          </ns9:datosAdicionales>
          <ns9:mensajeUsuario>Transaccion ok</ns9:mensajeUsuario>
          <ns9:referencia>
            <xsl:value-of select="/mmn:MensajeSalidaPago/informacionCore/sec"/>
          </ns9:referencia>
        </ns9:salidaEjecutarPago>
      </xsl:when>
      <xsl:otherwise>
        <ns9:salidaEjecutarPago>
          <ns9:codigoError>
            <xsl:value-of select="/mmn:MensajeSalidaPago/codigoError"/>
          </ns9:codigoError>
          <ns9:mensajeUsuario>
            <xsl:value-of select="/mmn:MensajeSalidaPago/mensajeUsuario"/>
          </ns9:mensajeUsuario>
        </ns9:salidaEjecutarPago>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet>
