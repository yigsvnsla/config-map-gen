<?oracle-xsl-mapper <!-- SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY. -->

  <mapSources>

    <source type="WSDL">

      <schema location="../xsd/ATM/EMT_1.wsdl"/>

      <rootElement name="MensajeSalidaConsultar" namespace="http://www.bolivariano.com/MensajeEMT"/>

    </source>

  </mapSources>

  <mapTargets>

    <target type="WSDL">

      <schema location="../otc-nopolicy.wsdl"/>

      <rootElement name="salidaConsultarDeuda" namespace="http://www.bolivariano.com/ws/OTCService"/>

    </target>

  </mapTargets>

  <!-- GENERATED BY ORACLE XSL MAPPER 11.1.1.7.0(build 130301.0647.0008) AT [THU MAY 24 15:01:43 COT 2018]. -->?>
<xsl:stylesheet version="1.0" exclude-result-prefixes="xsi xsl tns soap ns2 ns4 wsdl ns0 ns5 xsd1 xsd ns1 ns3 ns6 ns7 ns13 ns14 ns17 ns18 ns9 ns10 ns11 ns12 ns8 ns15 xp20 bpws bpel bpm ora socket mhdr oraext dvm hwf med ids xdk xref ldap" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:bpm="http://xmlns.oracle.com/bpmn20/extensions" xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/" xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue" xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath" xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath" xmlns:ldap="http://schemas.oracle.com/xpath/extension/ldap" xmlns:med="http://schemas.oracle.com/mediator/xpath" xmlns:mhdr="http://www.oracle.com/XSL/Transform/java/oracle.tip.mediator.service.common.functions.MediatorExtnFunction" xmlns:ns0="http://www.bolivariano.com/MensajeBolivariano" xmlns:ns1="http://www.bolivariano.com/EMT" xmlns:ns10="http://www.bolivariano.com/dominio/TipoMatriculacion" xmlns:ns11="http://www.bolivariano.com/dominio/FormaPago" xmlns:ns12="http://www.bolivariano.com/dominio/TipoIdentificador" xmlns:ns13="http://www.bolivariano.com/dominio/Convenio" xmlns:ns14="http://www.bolivariano.com/dominio/Recibo" xmlns:ns15="http://www.bolivariano.com/dominio/Empresa" xmlns:ns16="http://www.bolivariano.com/mensaje/MensajeOTC" xmlns:ns17="http://www.bolivariano.com/dominio/RegionalArea" xmlns:ns18="http://www.bolivariano.com/dominio/ListaSeleccion" xmlns:ns2="http://www.bolivariano.com/CoreBB" xmlns:ns3="http://www.bolivariano.com/Producto" xmlns:ns4="http://www.bolivariano.com/Cuenta" xmlns:ns5="http://www.bolivariano.com/Recaudo" xmlns:ns6="http://www.bolivariano.com/Cliente" xmlns:ns7="http://www.bolivariano.com/dominio/DatoAdicional" xmlns:ns8="http://www.bolivariano.com/ws/OTCService" xmlns:ns9="http://www.bolivariano.com/dominio/Servicio" xmlns:ora="http://schemas.oracle.com/xpath/extension" xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:socket="http://www.oracle.com/XSL/Transform/java/oracle.tip.adapter.socket.ProtocolTranslator" xmlns:tns="http://www.bolivariano.com/ws/EMT/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xdk="http://schemas.oracle.com/bpel/extension/xpath/function/xdk" xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20" xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsd1="http://www.bolivariano.com/MensajeEMT" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <xsl:template match="/">
      <xsl:choose>
         <xsl:when test="/xsd1:MensajeSalidaConsultar/codigoError='T0030'">
            <xsl:call-template name="RespuestaOK"/>
         </xsl:when>
         <xsl:when test="/xsd1:MensajeSalidaConsultar/codigoError='T0000'">
            <xsl:if test=" /xsd1:MensajeSalidaConsultar/emt/valorTotalCancelar>0">
               <xsl:call-template name="RespuestaOK"/>
            </xsl:if>
            <xsl:if test=" /xsd1:MensajeSalidaConsultar/emt/valorTotalCancelar=0">
               <ns16:salidaConsultarDeuda>
                  <ns16:codigoError>
                     <xsl:value-of select="/xsd1:MensajeSalidaConsultar/codigoError"/>
                  </ns16:codigoError>
                  <ns16:mensajeUsuario>CLIENTE NO TIENE VALOR A CANCELAR</ns16:mensajeUsuario>
               </ns16:salidaConsultarDeuda>
            </xsl:if>
         </xsl:when>
         <xsl:otherwise>
            <xsl:call-template name="RespuestaError"/>
         </xsl:otherwise>
      </xsl:choose>
   </xsl:template>
   <!--User Defined Templates-->
   <xsl:template name="RespuestaOK">
      <ns16:salidaConsultarDeuda>
         <ns16:codigoError>
            <xsl:text disable-output-escaping="no">0</xsl:text>
         </ns16:codigoError>
         <ns16:datosAdicionales>
            <xsl:call-template name="datosAdicionales"/>
         </ns16:datosAdicionales>
         <ns16:formaPago>
            <xsl:text disable-output-escaping="no">TOTAL</xsl:text>
         </ns16:formaPago>
    			<ns16:formaPagoRecibos>UNICO_CRONOLOGICO</ns16:formaPagoRecibos>         
         <ns16:mensajeUsuario>
            <xsl:value-of select="/xsd1:MensajeSalidaConsultar/mensajeUsuario"/>
         </ns16:mensajeUsuario>
         <ns16:montoTotal>
            <xsl:value-of select="/xsd1:MensajeSalidaConsultar/emt/valorTotalCancelar div 100.0"/>
         </ns16:montoTotal>
         <ns16:nombreCliente>
            <xsl:value-of select="/xsd1:MensajeSalidaConsultar/cliente/nombre"/>
         </ns16:nombreCliente>
      </ns16:salidaConsultarDeuda>
   </xsl:template>
   <xsl:template name="RespuestaError">
      <ns16:salidaConsultarDeuda>
         <ns16:codigoError>
            <xsl:value-of select="/xsd1:MensajeSalidaConsultar/codigoError"/>
         </ns16:codigoError>
         <ns16:mensajeUsuario>
            <xsl:value-of select="/xsd1:MensajeSalidaConsultar/mensajeUsuario"/>
         </ns16:mensajeUsuario>
      </ns16:salidaConsultarDeuda>
   </xsl:template>
   <xsl:template name="datosAdicionales">
      <xsl:if test="/xsd1:MensajeSalidaConsultar/emt/tramite!=&quot;&quot;">
         <xsl:if test="/xsd1:MensajeSalidaConsultar/emt/tramite!=&quot; &quot;">
            <ns16:datoAdicional>
               <codigo>
                  <xsl:text disable-output-escaping="no">tramite</xsl:text>
               </codigo>
               <etiqueta>
                  <xsl:text disable-output-escaping="no">Tramite</xsl:text>
               </etiqueta>
               <editable>
                  <xsl:text disable-output-escaping="no">false</xsl:text>
               </editable>
               <valor>
                  <xsl:value-of select="/xsd1:MensajeSalidaConsultar/emt/tramite"/>
               </valor>
               <visible>
                  <xsl:text disable-output-escaping="no">true</xsl:text>
               </visible>
            </ns16:datoAdicional>
         </xsl:if>
      </xsl:if>
      <ns16:datoAdicional>
         <codigo>
            <xsl:text disable-output-escaping="no">cantidadRubros</xsl:text>
         </codigo>
         <etiqueta>
            <xsl:text disable-output-escaping="no">cantidadRubros</xsl:text>
         </etiqueta>
         <editable>
            <xsl:text disable-output-escaping="no">false</xsl:text>
         </editable>
         <valor>
            <xsl:value-of select="/xsd1:MensajeSalidaConsultar/emt/cuenta/cantidadRubros"/>
         </valor>
         <visible>
            <xsl:text disable-output-escaping="no">false</xsl:text>
         </visible>
      </ns16:datoAdicional>
      <ns16:datoAdicional>
         <codigo>
            <xsl:text disable-output-escaping="no">idSolicitud</xsl:text>
         </codigo>
         <etiqueta>
            <xsl:text disable-output-escaping="no">idSolicitud</xsl:text>
         </etiqueta>
         <editable>
            <xsl:text disable-output-escaping="no">false</xsl:text>
         </editable>
         <valor>
            <xsl:value-of select="/xsd1:MensajeSalidaConsultar/emt/cuenta/idSolicitud"/>
         </valor>
         <visible>
            <xsl:text disable-output-escaping="no">false</xsl:text>
         </visible>
      </ns16:datoAdicional>
      <ns16:datoAdicional>
         <codigo>
            <xsl:text disable-output-escaping="no">citAtm</xsl:text>
         </codigo>
         <etiqueta>
            <xsl:text disable-output-escaping="no">citAtm</xsl:text>
         </etiqueta>
         <editable>
            <xsl:text disable-output-escaping="no">false</xsl:text>
         </editable>
         <valor>
            <xsl:value-of select="/xsd1:MensajeSalidaConsultar/emt/citAtm"/>
         </valor>
         <visible>
            <xsl:text disable-output-escaping="no">false</xsl:text>
         </visible>
      </ns16:datoAdicional>
      <ns16:datoAdicional>
         <codigo>
            <xsl:text disable-output-escaping="no">pagoSRI</xsl:text>
         </codigo>
         <etiqueta>
            <xsl:text disable-output-escaping="no">pagoSRI</xsl:text>
         </etiqueta>
         <editable>
            <xsl:text disable-output-escaping="no">false</xsl:text>
         </editable>
         <valor>
            <xsl:value-of select="/xsd1:MensajeSalidaConsultar/emt/pagoSRI"/>
         </valor>
         <visible>
            <xsl:text disable-output-escaping="no">false</xsl:text>
         </visible>
      </ns16:datoAdicional>
      <ns16:datoAdicional>
         <codigo>
            <xsl:text disable-output-escaping="no">regNacional</xsl:text>
         </codigo>
         <etiqueta>
            <xsl:text disable-output-escaping="no">regNacional</xsl:text>
         </etiqueta>
         <editable>
            <xsl:text disable-output-escaping="no">false</xsl:text>
         </editable>
         <valor>
            <xsl:value-of select="/xsd1:MensajeSalidaConsultar/emt/regNacional"/>
         </valor>
         <visible>
            <xsl:text disable-output-escaping="no">false</xsl:text>
         </visible>
      </ns16:datoAdicional>
      <ns16:datoAdicional>
         <codigo>
            <xsl:text disable-output-escaping="no">identificacion</xsl:text>
         </codigo>
         <etiqueta>
            <xsl:text disable-output-escaping="no">identificacion</xsl:text>
         </etiqueta>
         <editable>
            <xsl:text disable-output-escaping="no">false</xsl:text>
         </editable>
         <valor>
            <xsl:value-of select="/xsd1:MensajeSalidaConsultar/emt/cuenta/identificaciones/identificacion"/>
         </valor>
         <visible>
            <xsl:text disable-output-escaping="no">false</xsl:text>
         </visible>
      </ns16:datoAdicional>
      <ns16:datoAdicional>
         <codigo>
            <xsl:text disable-output-escaping="no">tipoIdentificacion</xsl:text>
         </codigo>
         <etiqueta>
            <xsl:text disable-output-escaping="no">tipoIdentificacion</xsl:text>
         </etiqueta>
         <editable>
            <xsl:text disable-output-escaping="no">false</xsl:text>
         </editable>
         <valor>
            <xsl:value-of select="/xsd1:MensajeSalidaConsultar/emt/cuenta/identificaciones/tipoIdentificacion"/>
         </valor>
         <visible>
            <xsl:text disable-output-escaping="no">false</xsl:text>
         </visible>
      </ns16:datoAdicional>
            <ns16:datoAdicional>
         <codigo>
            <xsl:text disable-output-escaping="no">costoComision</xsl:text>
         </codigo>
         <valor>
         <xsl:choose>
              <xsl:when test="/xsd1:MensajeSalidaConsultar/CNB/comision > 0">
              <xsl:variable name="nValorComision" select="string(/xsd1:MensajeSalidaConsultar/CNB/comision)"/>
                     
					    <xsl:value-of select="substring($nValorComision, 1, string-length(substring-before($nValorComision, '.')) + 3)"/>
              </xsl:when>
              <xsl:otherwise>
                <xsl:text disable-output-escaping="no">0.0</xsl:text>
              </xsl:otherwise>
          </xsl:choose>                	
         </valor>
      </ns16:datoAdicional>
   </xsl:template>
</xsl:stylesheet>