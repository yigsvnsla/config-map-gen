apiVersion: v1
kind: ConfigMap
metadata:
  name: cep
data:
  CEP_C_IN.xsl: |
    <?xml version="1.0" encoding="UTF-8" ?>
    <?oracle-xsl-mapper <!-- SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY. -->
      <mapSources>
        <source type="WSDL">
          <schema location="../otc-nopolicy.wsdl"/>
          <rootElement name="entradaConsultarDeuda" namespace="http://www.bolivariano.com/ws/OTCService"/>
        </source>
      </mapSources>
      <mapTargets>
        <target type="WSDL">
          <schema location="../CEP.xsd"/>
          <rootElement name="MensajeEntradaConsultar" namespace="http://www.bolivariano.com/MensajeMunicipio"/>
        </target>
      </mapTargets>
      <!-- GENERATED BY ORACLE XSL MAPPER 11.1.1.7.8(build 150622.2350.0222) AT [FRI MAY 25 12:48:54 COT 2018]. -->
    ?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                    xmlns:mmn="http://www.bolivariano.com/MensajeMunicipio"
                    xmlns:ns6="http://www.bolivariano.com/mensaje/MensajeOTC"
                    xmlns:java="java" exclude-result-prefixes="xsl mmn ns6">
      <xsl:template match="/">
        <mmn:MensajeEntradaConsultar>
          <canal>
            <xsl:value-of select="/ns6:entradaConsultarDeuda/ns6:canal"/>
          </canal>
          <fecha>
            <xsl:value-of select="/ns6:entradaConsultarDeuda/ns6:fecha"/>
          </fecha>
           <oficina>
            <xsl:value-of select='/ns6:entradaConsultarDeuda/ns6:servicio/datosAdicionales/datoAdicional[codigo = "s_ofi"]/valor'/>
          </oficina>
          <terminal>
            <xsl:value-of select='/ns6:entradaConsultarDeuda/ns6:servicio/datosAdicionales/datoAdicional[codigo = "s_term"]/valor'/>
          </terminal>
          <transaccion>
            <xsl:text disable-output-escaping="no">62073</xsl:text>
          </transaccion>
          <usuario>
            <xsl:value-of select='/ns6:entradaConsultarDeuda/ns6:servicio/datosAdicionales/datoAdicional[codigo = "s_user"]/valor'/>
          </usuario>
          <banred>
            <codigoOperador>
              <xsl:text disable-output-escaping="no">000000998</xsl:text>
            </codigoOperador>
             <fechaCompensacion>
             <xsl:value-of select='java:format(java:text.SimpleDateFormat.new("yyyyMMdd"), java:util.Date.new())'/>
            </fechaCompensacion>
            <fechaHoraBANRED>
              <xsl:value-of select='java:format(java:text.SimpleDateFormat.new("yyyyMMddHHmmss"), java:util.Date.new())'/>
            </fechaHoraBANRED>
            <fechaTransaccionLocal>
              <xsl:value-of select='java:format(java:text.SimpleDateFormat.new("yyyyMMdd"), java:util.Date.new())'/>
            </fechaTransaccionLocal>
            <horaTransaccionLocal>
              <xsl:value-of select='java:format(java:text.SimpleDateFormat.new("HHmmss"), java:util.Date.new())'/>
            </horaTransaccionLocal>
            <institucionAdquirente>
              <xsl:text disable-output-escaping="no">00597777</xsl:text>
            </institucionAdquirente>
            <numeroTerminal>
              <xsl:text disable-output-escaping="no">0233000000OPE998</xsl:text>
            </numeroTerminal>
            <producto>
              <xsl:text disable-output-escaping="no">0010031003</xsl:text>
            </producto>
            <secuencialAdquirente>
              <xsl:value-of select='substring(/ns6:entradaConsultarDeuda/ns6:servicio/datosAdicionales/datoAdicional[codigo = "s_ssn"]/valor,2,6)'/>
              <!--<xsl:text disable-output-escaping="no">935933</xsl:text>-->
            </secuencialAdquirente>
            <secuencialBANRED>
              <xsl:text disable-output-escaping="no">1</xsl:text>
            </secuencialBANRED>
            <xsl:choose>
             <xsl:when test="/ns6:entradaConsultarDeuda/ns6:canal ='CNB'">
    						            <tipoMoneda>
              <xsl:text disable-output-escaping="no">1</xsl:text>
            </tipoMoneda>
    					    	</xsl:when>
    					    	<xsl:otherwise>
    						   <tipoMoneda>
              <xsl:text disable-output-escaping="no">840</xsl:text>
            </tipoMoneda>
    					    	</xsl:otherwise>
            </xsl:choose>
            <tipoTransaccion>
              <xsl:text disable-output-escaping="no">310000</xsl:text>
            </tipoTransaccion>
          </banred>
          <municipio>
            <opcion>
              <xsl:text disable-output-escaping="no">C</xsl:text>
            </opcion>
            <codigoComercio>
              <xsl:text disable-output-escaping="no">2245</xsl:text>
            </codigoComercio>
            <codigoProveedor>
              <xsl:value-of select="/ns6:entradaConsultarDeuda/ns6:servicio/codigoConvenio"/>
            </codigoProveedor>
            <empresa>
              <xsl:value-of select="/ns6:entradaConsultarDeuda/ns6:servicio/codigoConvenio"/>
            </empresa>
    		 <xsl:choose>
              <xsl:when test='/ns6:entradaConsultarDeuda/ns6:servicio/codigoTipoIdentificador  = "01"'>
    			  <suministro>
                 <xsl:value-of select="/ns6:entradaConsultarDeuda/ns6:servicio/identificador"/>
                </suministro>
              </xsl:when>
    		   </xsl:choose>
            <ubicacion>
              <xsl:text disable-output-escaping="no">0</xsl:text>
            </ubicacion>
            <cuenta>
              <servicio>
                <xsl:value-of select="/ns6:entradaConsultarDeuda/ns6:servicio/codigoTipoIdentificador"/>
              </servicio>
              <xsl:choose>
               <xsl:when test="/ns6:entradaConsultarDeuda/ns6:canal ='CNB'">
    						<rubroPerson>
                  <xsl:text disable-output-escaping="no">MCEP</xsl:text>
                </rubroPerson>
                <serviPerson>
                  <xsl:text disable-output-escaping="no">IMPM</xsl:text>
                </serviPerson>
    					 </xsl:when>
              </xsl:choose>
            </cuenta>
            <anioVigencia>9999</anioVigencia>
            <xsl:choose>
             <xsl:when test='/ns6:entradaConsultarDeuda/ns6:servicio/codigoTipoIdentificador  = "01"'>
                <!-- <suministro>
                  <xsl:value-of select='substring(
                  concat("0000000000",/mmn:MensajeEntradaConsultar/municipio/suministro),string-length(/mmn:MensajeEntradaConsultar/municipio/suministro) + 1.0,10.0)'/>-->
    			  <codigoCanal>4</codigoCanal>
    				<institucionAutorizadora>
                  <xsl:text disable-output-escaping="no">0233</xsl:text>
                </institucionAutorizadora>
    			</xsl:when>
              <xsl:when test='/ns6:entradaConsultarDeuda/ns6:servicio/codigoTipoIdentificador = "02"'>
                <identificacion>
                  <xsl:value-of select="/ns6:entradaConsultarDeuda/ns6:servicio/identificador"/>
                </identificacion>
              </xsl:when>
              <xsl:when test='/ns6:entradaConsultarDeuda/ns6:servicio/codigoTipoIdentificador = "03"'>
                <codigoCanal>4</codigoCanal>
                <codigoPHH>
                  <xsl:value-of select="substring(/ns6:entradaConsultarDeuda/ns6:servicio/identificador, 29,4)"/>
                </codigoPHH>
                <codigoPHV>
                  <xsl:value-of select="substring(/ns6:entradaConsultarDeuda/ns6:servicio/identificador, 24,4)"/>
                </codigoPHV>
                <division>
                  <xsl:value-of select="substring(/ns6:entradaConsultarDeuda/ns6:servicio/identificador, 19,4)"/>
                </division>
                <institucionAutorizadora>
                  <xsl:text disable-output-escaping="no">0233</xsl:text>
                </institucionAutorizadora>
                <lote>
                  <xsl:value-of select="substring(/ns6:entradaConsultarDeuda/ns6:servicio/identificador,14,3)"/>
                </lote>
                <manzana>
                  <xsl:value-of select="substring(/ns6:entradaConsultarDeuda/ns6:servicio/identificador, 7,4)"/>
                </manzana>
                <numeroCatastral>
                  <xsl:value-of select="substring(/ns6:entradaConsultarDeuda/ns6:servicio/identificador,36,1)"/>
                </numeroCatastral>
                <sector>
                  <xsl:value-of select="substring(/ns6:entradaConsultarDeuda/ns6:servicio/identificador, 2,3)"/>
                </sector>
              </xsl:when>
              <xsl:when test='/ns6:entradaConsultarDeuda/ns6:servicio/codigoTipoIdentificador = "04"'>
                <identificacion>
                  <xsl:value-of select="/ns6:entradaConsultarDeuda/ns6:servicio/identificador"/>
                </identificacion>
              </xsl:when>
            </xsl:choose>
            <semestre>
              <xsl:text disable-output-escaping="no">3</xsl:text>
            </semestre>
          </municipio>
          <informacionCore>
            <rolBPM>
              <xsl:value-of select='/ns6:entradaConsultarDeuda/ns6:servicio/datosAdicionales/datoAdicional[codigo = "s_rol"]/valor'/>
            </rolBPM>
            <sec>
              <xsl:value-of select='/ns6:entradaConsultarDeuda/ns6:servicio/datosAdicionales/datoAdicional[codigo = "s_ssn"]/valor'/>
            </sec>
            <secuencial>
              <xsl:value-of select='/ns6:entradaConsultarDeuda/ns6:servicio/datosAdicionales/datoAdicional[codigo = "s_ssn"]/valor'/>
            </secuencial>
            <servidor>
              <xsl:value-of select='/ns6:entradaConsultarDeuda/ns6:servicio/datosAdicionales/datoAdicional[codigo = "s_srv"]/valor'/>
            </servidor>
          </informacionCore>
        </mmn:MensajeEntradaConsultar>
      </xsl:template>
    </xsl:stylesheet>
  CEP_C_OUT.xsl: |
    <?xml version="1.0" encoding="UTF-8" ?>
    <?oracle-xsl-mapper <!-- SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY. -->
    <mapSources>
    	<source type="WSDL">
    		<schema location="../CEP_1.wsdl"/>
    		<rootElement name="MensajeSalidaConsultar" namespace="http://www.bolivariano.com/MensajeMunicipio"/>
    	</source>
    </mapSources>
    <mapTargets>
    <target type="WSDL">
    	<schema location="../otc-nopolicy.wsdl"/>
    	<rootElement name="MensajeSalidaConsultarDeuda" namespace="http://www.bolivariano.com/mensaje/MensajeOTC"/>
    </target>
    </mapTargets>
    		<!-- GENERATED BY ORACLE XSL MAPPER 11.1.1.7.8(build 150622.2350.0222) AT [FRI MAY 25 16:18:59 COT 2018]. -->
    		?>
    <xsl:stylesheet version="1.0"
    				xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/"
    				xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20"
    				xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    				xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    				xmlns:bpm="http://xmlns.oracle.com/bpmn20/extensions"
    				xmlns:ns8="http://www.bolivariano.com/dominio/DatoAdicional"
    				xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    				xmlns:ns1="http://www.bolivariano.com/CoreBB"
    				xmlns:ns3="http://www.bolivariano.com/Cuenta"
    				xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    				xmlns:ora="http://schemas.oracle.com/xpath/extension"
    				xmlns:ns12="http://www.bolivariano.com/dominio/Convenio"
    				xmlns:socket="http://www.oracle.com/XSL/Transform/java/oracle.tip.adapter.socket.ProtocolTranslator"
    				xmlns:ns14="http://www.bolivariano.com/dominio/Recibo"
    				xmlns:ns19="http://www.bolivariano.com/dominio/RegionalArea"
    				xmlns:ns18="http://www.bolivariano.com/dominio/ListaSeleccion"
    				xmlns:ns11="http://www.bolivariano.com/dominio/Servicio"
    				xmlns:mhdr="http://www.oracle.com/XSL/Transform/java/oracle.tip.mediator.service.common.functions.MediatorExtnFunction"
    				xmlns:xsd1="http://www.bolivariano.com/MensajeMunicipio"
    				xmlns:ns0="http://www.bolivariano.com/MensajeBolivariano"
    				xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc"
    				xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue"
    				xmlns:ns4="http://www.bolivariano.com/Banred"
    				xmlns:ns5="http://www.bolivariano.com/Recaudo"
    				xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath"
    				xmlns:ns16="http://www.bolivariano.com/dominio/TipoMatriculacion"
    				xmlns:med="http://schemas.oracle.com/mediator/xpath"
    				xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    				xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath"
    				xmlns:ns17="http://www.bolivariano.com/dominio/FormaPago"
    				xmlns:ns7="http://www.bolivariano.com/Municipio"
    				xmlns:xdk="http://schemas.oracle.com/bpel/extension/xpath/function/xdk"
    				xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions"
    				xmlns:tns="http://www.bolivariano.com/ws/CEP/"
    				xmlns:ns10="http://www.bolivariano.com/dominio/TipoIdentificador"
    				xmlns:ns9="http://www.bolivariano.com/ws/OTCService"
    				xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    				xmlns:ns2="http://www.bolivariano.com/Producto"
    				xmlns:bpmn="http://schemas.oracle.com/bpm/xpath"
    				xmlns:ns13="http://www.bolivariano.com/dominio/Empresa"
    				xmlns:ns6="http://www.bolivariano.com/Cliente"
    				xmlns:ns15="http://www.bolivariano.com/mensaje/MensajeOTC"
    				xmlns:ldap="http://schemas.oracle.com/xpath/extension/ldap"
    				exclude-result-prefixes="xsi xsl soap ns1 ns3 wsdl xsd1 ns0 ns4 ns5 ns7 tns xsd ns2 ns6 ns8 ns12 ns14 ns19 ns18 ns11 ns16 ns17 ns10 ns9 ns13 ns15 bpws xp20 bpel bpm ora socket mhdr oraext dvm hwf med ids xdk xref bpmn ldap">
    <xsl:template match="/">
    	<xsl:choose>
    		<xsl:when test="/xsd1:MensajeSalidaConsultar/codigoError='00'">
    			<ns15:salidaConsultarDeuda>
    				<ns15:codigoError>0</ns15:codigoError>
    				<ns15:mensajeUsuario>Mensaje Procesado</ns15:mensajeUsuario>
    				<ns15:formaPago>TOTAL</ns15:formaPago>
    				<ns15:formaPagoRecibos>UNICO_CRONOLOGICO</ns15:formaPagoRecibos>
    				<ns15:datosAdicionales>
    					<ns15:datoAdicional>
    						<codigo>valorComision</codigo>
    						<valor>
    							<xsl:value-of select="format-number(/xsd1:MensajeSalidaConsultar/municipio/valorComision, '0.00')"/>
    						</valor>
    					</ns15:datoAdicional>
    				</ns15:datosAdicionales>
    				<xsl:choose>
    					<xsl:when test="/xsd1:MensajeSalidaConsultar/municipio/valorTotalCancelar div 100 = '0'">
    						<ns15:montoTotal>
    							<xsl:value-of select="substring(/xsd1:MensajeSalidaConsultar/municipio/pagos,5,10) div 100"/>
    						</ns15:montoTotal>
    					</xsl:when>
    					<xsl:otherwise>
    						<ns15:montoTotal>
    							<xsl:value-of select="/xsd1:MensajeSalidaConsultar/municipio/valorTotalCancelar div 100"/>
    						</ns15:montoTotal>
    					</xsl:otherwise>
    				</xsl:choose>
    				<ns15:nombreCliente>
    					<xsl:value-of select="/xsd1:MensajeSalidaConsultar/municipio/cuenta/nombreCuenta"/>
    				</ns15:nombreCliente>
    				<ns15:recibos>
    					<xsl:call-template name="recibo">
    						<xsl:with-param name="subcadena"
    										select="/xsd1:MensajeSalidaConsultar/municipio/pagos"/>
    						<xsl:with-param name="subcadena2"
    										select="/xsd1:MensajeSalidaConsultar/municipio/valorTotalCancelar"/>
    					</xsl:call-template>
    				</ns15:recibos>
    			</ns15:salidaConsultarDeuda>
    		</xsl:when>
    		<xsl:otherwise>
    			<ns15:salidaConsultarDeuda>
    				<ns15:codigoError>
    					<xsl:value-of select="/xsd1:MensajeSalidaConsultar/codigoError"/>
    				</ns15:codigoError>
    				<ns15:mensajeUsuario>
    					<xsl:value-of select="/xsd1:MensajeSalidaConsultar/mensajeUsuario"/>
    				</ns15:mensajeUsuario>
    			</ns15:salidaConsultarDeuda>
    		</xsl:otherwise>
    	</xsl:choose>
    </xsl:template>
    <xsl:template name="recibo">
    	<xsl:param name="subcadena"/>
    	<xsl:param name="subcadena2"/>
    	<xsl:choose>
    		<xsl:when test="/xsd1:MensajeSalidaConsultar/municipio/tipoCanal!='CNB'">
    			<xsl:if test="$subcadena2 div 100 = '0'">
    				<ns15:recibo>
    					<fecha>
    						<xsl:value-of select="substring($subcadena,1,4)"/>
    					</fecha>
    					<totalAPagar>
    						<xsl:value-of select="substring($subcadena,5,10) div 100"/>
    					</totalAPagar>
    				</ns15:recibo>
    				<xsl:call-template name="recibo">
    					<xsl:with-param name="subcadena"
    									select="substring($subcadena,15,string-length($subcadena)-14)"/>
    				</xsl:call-template>
    			</xsl:if>
    		</xsl:when>
    		<xsl:when test="/xsd1:MensajeSalidaConsultar/municipio/cuic!='0' and (/xsd1:MensajeSalidaConsultar/municipio/tipoCanal='CNB')">
    			<ns15:recibo>
    				<fecha>
    					<xsl:value-of select="substring(/xsd1:MensajeSalidaConsultar/municipio/anioVigencia,1,4)"/>
    				</fecha>
    				<totalAPagar>
    					<xsl:value-of select="/xsd1:MensajeSalidaConsultar/municipio/valorTotalCancelar div 100"/>
    				</totalAPagar>
    			</ns15:recibo>
    		</xsl:when>
    		<xsl:when test="/xsd1:MensajeSalidaConsultar/municipio/cuic='0' and (/xsd1:MensajeSalidaConsultar/municipio/tipoCanal='CNB')">
    			<ns15:recibo>
    				<fecha>
    					<xsl:value-of select="substring($subcadena,1,4)"/>
    				</fecha>
    				<totalAPagar>
    					<xsl:value-of select="substring($subcadena,5,10) div 100"/>
    				</totalAPagar>
    			</ns15:recibo>
    		</xsl:when>
    	</xsl:choose>
    </xsl:template>
    </xsl:stylesheet>
  CEP_P_IN.xsl: |
    <?xml version="1.0" encoding="UTF-8" ?>
    <?oracle-xsl-mapper
      <!-- SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY. -->
      <mapSources>
        <source type="WSDL">
          <schema location="../otc-nopolicy.wsdl"/>
          <rootElement name="entradaEjecutarPago" namespace="http://www.bolivariano.com/ws/OTCService"/>
        </source>
      </mapSources>
      <mapTargets>
        <target type="WSDL">
          <schema location="../CEP.xsd"/>
          <rootElement name="MensajeEntradaPago" namespace="http://www.bolivariano.com/MensajeMunicipio"/>
        </target>
      </mapTargets>
      <!-- GENERATED BY ORACLE XSL MAPPER 11.1.1.7.8(build 150622.2350.0222) AT [FRI MAY 25 16:33:28 COT 2018]. -->
    ?>
    <xsl:stylesheet version="1.0"
                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                    xmlns:tns="http://www.bolivariano.com/ws/OTCService"
                    xmlns:mmn="http://www.bolivariano.com/MensajeMunicipio"
                    xmlns:ns6="http://www.bolivariano.com/mensaje/MensajeOTC"
                    xmlns:java="java"
                    exclude-result-prefixes="java ns6 tns xsl">
    	<xsl:template match="/">
    		<mmn:MensajeEntradaPago>
    			<canal>
    				<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:canal"/>
    			</canal>
    			<fecha>
    				<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_date"]/valor'/>
    			</fecha>
    			<oficina>
    				<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_ofi"]/valor'/>
    			</oficina>
    			<terminal>
    				<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_term"]/valor'/>
    			</terminal>
    			<transaccion>
    				<xsl:text disable-output-escaping="no">62074</xsl:text>
    			</transaccion>
    			<usuario>
    				<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_user"]/valor'/>
    			</usuario>
    			<banred>
    				<codigoOperador>
    					<xsl:text disable-output-escaping="no">000005390</xsl:text>
    				</codigoOperador>
    				<fechaCompensacion>
    					<xsl:value-of select='java:format(java:text.SimpleDateFormat.new("yyyyMMdd"), java:util.Date.new())'/>
    				</fechaCompensacion>
    				<fechaHoraBANRED>
    					<xsl:value-of select='java:format(java:text.SimpleDateFormat.new("yyyyMMddHHmmss"), java:util.Date.new())'/>
    				</fechaHoraBANRED>
    				<fechaTransaccionLocal>
    					<xsl:value-of select='java:format(java:text.SimpleDateFormat.new("yyyyMMdd"), java:util.Date.new())'/>
    				</fechaTransaccionLocal>
    				<horaTransaccionLocal>
    					<xsl:value-of select='java:format(java:text.SimpleDateFormat.new("HHmmss"), java:util.Date.new())'/>
    				</horaTransaccionLocal>
    				<institucionAdquirente>
    					<xsl:text disable-output-escaping="no">00597777</xsl:text>
    				</institucionAdquirente>
    				<numeroTerminal>
    					<xsl:text disable-output-escaping="no">0233000000VIRTUA</xsl:text>
    				</numeroTerminal>
    				<producto>
    					<xsl:text disable-output-escaping="no">0010031003</xsl:text>
    				</producto>
    				<secuencialAdquirente>
    					<xsl:value-of select='substring(/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_ssn"]/valor,2,6)'/>
    				</secuencialAdquirente>
    				<secuencialBANRED>
    					<xsl:value-of select='substring(/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_ssn"]/valor,2,6)'/>
    				</secuencialBANRED>
    				<tipoMoneda>
    					<xsl:text disable-output-escaping="no">840</xsl:text>
    				</tipoMoneda>
    				<tipoTransaccion>
    					<xsl:text disable-output-escaping="no">45109M</xsl:text>
    				</tipoTransaccion>
    			</banred>
    			<municipio>
    				<autorizacion>
    					<xsl:text disable-output-escaping="no">N</xsl:text>
    				</autorizacion>
    				<cantidadCheque>
    					<xsl:text disable-output-escaping="no">0</xsl:text>
    				</cantidadCheque>
    				<chequeComision>
    					<xsl:text disable-output-escaping="no">0.00</xsl:text>
    				</chequeComision>
    				<codigoComercio>
    					<xsl:text disable-output-escaping="no">2245</xsl:text>
    				</codigoComercio>
    				<codigoProveedor>
    					<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:servicio/codigoEmpresa"/>
    				</codigoProveedor>
    				<xsl:choose>
    					<xsl:when test='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "MPA_TC"]'>
    						<debito>
    							<xsl:text disable-output-escaping="no">0.00</xsl:text>
    						</debito>
    						<debitoComision>
    							<xsl:text disable-output-escaping="no">0.00</xsl:text>
    						</debitoComision>
    					</xsl:when>
    					<xsl:when test="/ns6:entradaEjecutarPago/ns6:canal = 'CNB' and (/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_forma_pago']/valor = 'EFE')">
    						<debito>
    							<xsl:text disable-output-escaping="no">0.00</xsl:text>
    						</debito>
    						<debitoComision>
    							<xsl:text disable-output-escaping="no">0.00</xsl:text>
    						</debitoComision>
    						<efectivo>
    							<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:valorPago"/>
    						</efectivo>
    						<efectivoComision>
    							<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:valorComision"/>
    						</efectivoComision>
    					</xsl:when>
    					<xsl:when test="/ns6:entradaEjecutarPago/ns6:canal = 'CNB' and (/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_forma_pago']/valor = 'DEB')">
    						<debito>
    							<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:valorPago"/>
    						</debito>
    						<debitoComision>
    							<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:valorComision"/>
    						</debitoComision>
    						<efectivo>
    							<xsl:text disable-output-escaping="no">0.00</xsl:text>
    						</efectivo>
    						<efectivoComision>
    							<xsl:text disable-output-escaping="no">0.00</xsl:text>
    						</efectivoComision>
    					</xsl:when>
    					<xsl:otherwise>
    						<debito>
    							<xsl:value-of select="format-number(/ns6:entradaEjecutarPago/ns6:valorPago,'0.00')"/>
    						</debito>
    						<debitoComision>
    							<xsl:value-of select="format-number(/ns6:entradaEjecutarPago/ns6:valorComision,'0.00')"/>
    						</debitoComision>
    						<efectivo>
    							<xsl:text disable-output-escaping="no">0.00</xsl:text>
    						</efectivo>
    						<efectivoCheque>
    							<xsl:text disable-output-escaping="no">0.00</xsl:text>
    						</efectivoCheque>
    						<efectivoComision>
    							<xsl:text disable-output-escaping="no">0.00</xsl:text>
    						</efectivoComision>
    					</xsl:otherwise>
    				</xsl:choose>
    				<empresa>
    					<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:servicio/codigoConvenio"/>
    				</empresa>
    				<nombre>
    					<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:nombreCliente"/>
    				</nombre>
    				<numeroTarjeta>
    					<xsl:text disable-output-escaping="no">0.00</xsl:text>
    				</numeroTarjeta>
    				<opcion>
    					<xsl:text disable-output-escaping="no">T</xsl:text>
    				</opcion>
    				<secuencialRequerimiento>
    					<xsl:value-of select='substring(/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_ssn"]/valor,2,6)'/>
    				</secuencialRequerimiento>
    				<xsl:choose>
    					<xsl:when test='/ns6:entradaEjecutarPago/ns6:servicio/codigoTipoIdentificador  = "01"'>
    						<suministro>
    							<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:servicio/identificador"/>
    						</suministro>
    					</xsl:when>
    				</xsl:choose>
    				<tipoMoneda>
    					<xsl:text disable-output-escaping="no">1</xsl:text>
    				</tipoMoneda>
    				<xsl:choose>
    					<xsl:when test='/ns6:entradaEjecutarPago/ns6:servicio/codigoTipoIdentificador  = "01"'>
    						<tipoReferencia>
    							<xsl:text disable-output-escaping="no">004</xsl:text>
    						</tipoReferencia>
    					</xsl:when>
    					<xsl:otherwise>
    						<tipoReferencia>
    							<xsl:text disable-output-escaping="no">001</xsl:text>
    						</tipoReferencia>
    					</xsl:otherwise>
    				</xsl:choose>
    				<ubicacion>
    					<xsl:text disable-output-escaping="no">0</xsl:text>
    				</ubicacion>
    				<valorTotalCancelar>
    					<xsl:value-of select="format-number(/ns6:entradaEjecutarPago/ns6:valorPago,'0.00')"/>
    				</valorTotalCancelar>
    				<cuenta>
    					<cuenta>
    						<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:cuenta'/>
    					</cuenta>
    					<idProducto>
    						<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:tipoCuenta'/>
    					</idProducto>
    					<tipoCuenta>
    						<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:tipoCuenta'/>
    					</tipoCuenta>
    					<servicio>
    						<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:servicio/codigoTipoIdentificador"/>
    					</servicio>
    				</cuenta>
    				<anioVigencia>
    					<!-- <xsl:text disable-output-escaping="no">9999</xsl:text>-->
    					<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:recibos/ns6:recibo/fecha"/>
    				</anioVigencia>
    				<xsl:choose>
    					<xsl:when test='/ns6:entradaEjecutarPago/ns6:servicio/codigoTipoIdentificador  = "01"'>
    						<!-- <suministro>
                  <xsl:value-of select='substring(
                  concat("0000000000",/mmn:entradaEjecutarPago/municipio/suministro), string-length(/mmn:MensajeEntradaConsultar/municipio/suministro) + 1.0,10.0)'/>
                </suministro>-->
    						<codigoCanal>4</codigoCanal>
    						<institucionAutorizadora>
    							<xsl:text disable-output-escaping="no">0233</xsl:text>
    						</institucionAutorizadora>
    					</xsl:when>
    					<xsl:when test='/ns6:entradaEjecutarPago/ns6:servicio/codigoTipoIdentificador = "02"'>
    						<identificacion>
    							<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:servicio/identificador"/>
    						</identificacion>
    					</xsl:when>
    					<xsl:when test='/ns6:entradaEjecutarPago/ns6:servicio/codigoTipoIdentificador = "03"'>
    						<codigoCanal>4</codigoCanal>
    						<codigoPHH>
    							<xsl:value-of select="substring(/ns6:entradaEjecutarPago/ns6:servicio/identificador, 29,4)"/>
    						</codigoPHH>
    						<codigoPHV>
    							<xsl:value-of select="substring(/ns6:entradaEjecutarPago/ns6:servicio/identificador, 24,4)"/>
    						</codigoPHV>
    						<division>
    							<xsl:value-of select="substring(/ns6:entradaEjecutarPago/ns6:servicio/identificador, 18,5)"/>
    						</division>
    						<institucionAutorizadora>
    							<xsl:text disable-output-escaping="no">0233</xsl:text>
    						</institucionAutorizadora>
    						<lote>
    							<xsl:value-of select="substring(/ns6:entradaEjecutarPago/ns6:servicio/identificador,12,5)"/>
    						</lote>
    						<manzana>
    							<xsl:value-of select="substring(/ns6:entradaEjecutarPago/ns6:servicio/identificador, 6,5)"/>
    						</manzana>
    						<numeroCatastral>
    							<xsl:value-of select="substring(/ns6:entradaEjecutarPago/ns6:servicio/identificador,34,3)"/>
    						</numeroCatastral>
    						<sector>
    							<xsl:value-of select="substring(/ns6:entradaEjecutarPago/ns6:servicio/identificador, 1,4)"/>
    						</sector>
    					</xsl:when>
    					<xsl:when test='/ns6:entradaEjecutarPago/ns6:servicio/codigoTipoIdentificador = "04"'>
    						<identificacion>
    							<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:servicio/identificador"/>
    						</identificacion>
    					</xsl:when>
    				</xsl:choose>
    				<semestre>
    					<xsl:text disable-output-escaping="no">3</xsl:text>
    				</semestre>
    				<xsl:if test='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "MPA_TC"]'>
    					<formaPago>
    						<tarjeta>
    							<tarjeta>
    								<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "MPA_TC"]/valor'/>
    							</tarjeta>
    							<valor>
    								<xsl:value-of select="format-number(/ns6:entradaEjecutarPago/ns6:valorPago,'0.00')"/>
    							</valor>
    							<valorComision>
    								<xsl:value-of select="format-number(/ns6:entradaEjecutarPago/ns6:valorComision,'0.00')"/>
    							</valorComision>
    							<mesesDiferido>
    								<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "FPA_TC"]/valor'/>
    							</mesesDiferido>
    						</tarjeta>
    					</formaPago>
    				</xsl:if>
    			</municipio>
    			<informacionCore>
    				<rolBPM>
    					<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_rol"]/valor'/>
    				</rolBPM>
    				<sec>
    					<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_ssn"]/valor'/>
    				</sec>
    				<secuencial>
    					<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_ssn"]/valor'/>
    				</secuencial>
    				<servidor>
    					<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_srv"]/valor'/>
    				</servidor>
    			</informacionCore>
    			<xsl:choose>
    				<xsl:when test="/ns6:entradaEjecutarPago/ns6:canal = 'CNB'">
    					<CNB>
    						<autorizacion>
    							<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_autorizacionCNB']/valor"/>
    						</autorizacion>
    						<comercio>
    							<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_comercio']/valor"/>
    						</comercio>
    						<terminalID>
    							<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_terminalID']/valor"/>
    						</terminalID>
    						<agencia>
    							<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_agencia']/valor"/>
    						</agencia>
    						<red>
    							<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_red']/valor"/>
    						</red>
    						<secuencial>
    							<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_ssn"]/valor'/>
    						</secuencial>
    						<valor>
    							<xsl:value-of select="/ns6:entradaEjecutarPago/ns6:valorPago"/>
    						</valor>
    						<nombreCliente>
    							<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "p_nombreCliente"]/valor'/>
    						</nombreCliente>
    						<identificacionCliente>
    							<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "p_identificacionCliente"]/valor'/>
    						</identificacionCliente>
    						<modoCorreccion>
    							<xsl:text disable-output-escaping="no">N</xsl:text>
    						</modoCorreccion>
    						<tipoTransaccion>
    							<xsl:text disable-output-escaping="no">P</xsl:text>
    						</tipoTransaccion>
    						<formaPago>
    							<xsl:value-of select='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "p_forma_pago"]/valor'/>
    						</formaPago>
    					</CNB>
    				</xsl:when>
    			</xsl:choose>
    		</mmn:MensajeEntradaPago>
    	</xsl:template>
    </xsl:stylesheet>
  CEP_P_OUT.xsl: |
    <?xml version="1.0" encoding="UTF-8" ?>
    <?oracle-xsl-mapper <!-- SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY. -->
      <mapSources>
        <source type="XSD">
          <schema location="../CEP.xsd"/>
          <rootElement name="MensajeSalidaPago" namespace="http://www.bolivariano.com/MensajeMunicipio"/>
        </source>
      </mapSources>
      <mapTargets>
        <target type="WSDL">
          <schema location="../otc-nopolicy.wsdl"/>
          <rootElement name="salidaEjecutarPago" namespace="http://www.bolivariano.com/ws/OTCService"/>
        </target>
      </mapTargets>
      <!-- GENERATED BY ORACLE XSL MAPPER 11.1.1.7.8(build 150622.2350.0222) AT [FRI MAY 25 18:06:35 COT 2018]. -->
    ?>
    <xsl:stylesheet version="1.0"
                    xmlns:mmn="http://www.bolivariano.com/MensajeMunicipio"
                    xmlns:ns9="http://www.bolivariano.com/mensaje/MensajeOTC"
                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                    xmlns:java="java"
                    exclude-result-prefixes="java xsl ns9 mmn">
      <xsl:template match="/">
        <xsl:choose>
          <xsl:when test="/mmn:MensajeSalidaPago/informacionCore/sec!=''">
            <ns9:salidaEjecutarPago>
              <ns9:codigoError>0</ns9:codigoError>
              <ns9:fechaDebito>
              <xsl:value-of select='java:format(java:text.SimpleDateFormat.new("yyyy-MM-dd&apos;T&apos;HH:mm:ss"), java:util.Date.new())'/>
              </ns9:fechaDebito>
              <xsl:variable name="fechaC"
                            select="/mmn:MensajeSalidaPago/municipio/fechaContable"/>
              <ns9:fechaPago>
              <xsl:value-of select="concat(substring($fechaC,1,4),'-',substring($fechaC,5,2),'-',substring($fechaC,7,2) )"/>
              </ns9:fechaPago>
              <!--<xsl:variable name="fechaP"
                            select="/mmn:MensajeSalidaPago/municipio/fechaEfectiva"/>
              <xsl:value-of select="concat(substring($fechaP,7,4),'-',substring($fechaP,1,2),'-',substring($fechaP,4,2) )"/> -->
             <ns9:datosAdicionales>
                <ns9:datoAdicional>
                  <codigo>horario</codigo>
                  <valor>
                    <xsl:value-of select="/mmn:MensajeSalidaPago/municipio/horario"/>
                  </valor>
                </ns9:datoAdicional>
              </ns9:datosAdicionales>
              <ns9:mensajeUsuario>Transaccion ok</ns9:mensajeUsuario>
              <ns9:referencia>
                <xsl:value-of select="/mmn:MensajeSalidaPago/informacionCore/sec"/>
              </ns9:referencia>
            </ns9:salidaEjecutarPago>
          </xsl:when>
          <xsl:otherwise>
            <ns9:salidaEjecutarPago>
              <ns9:codigoError>
                <xsl:value-of select="/mmn:MensajeSalidaPago/codigoError"/>
              </ns9:codigoError>
              <ns9:mensajeUsuario>
                <xsl:value-of select="/mmn:MensajeSalidaPago/mensajeUsuario"/>
              </ns9:mensajeUsuario>
            </ns9:salidaEjecutarPago>
          </xsl:otherwise>
        </xsl:choose>
      </xsl:template>
    </xsl:stylesheet>
  CEP_R_IN.xsl: |
    <?xml version="1.0" encoding="UTF-8" ?>
    <?oracle-xsl-mapper
    <!-- SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY. -->
    <mapSources>
        <source type="WSDL">
            <schema location="../otc-nopolicy.wsdl"/>
            <rootElement name="entradaEjecutarReverso" namespace="http://www.bolivariano.com/ws/OTCService"/>
        </source>
    </mapSources>
    <mapTargets>
    <target type="WSDL">
        <schema location="../CEP.xsd"/>
        <rootElement name="MensajeEntradaReverso" namespace="http://www.bolivariano.com/MensajeMunicipio"/>
    </target>
    </mapTargets>
            <!-- GENERATED BY ORACLE XSL MAPPER 11.1.1.7.8(build 150622.2350.0222) AT [FRI MAY 25 16:33:28 COT 2018]. -->
            ?>
    <xsl:stylesheet version="1.0"
                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                    xmlns:tns="http://www.bolivariano.com/ws/OTCService"
                    xmlns:mmn="http://www.bolivariano.com/MensajeMunicipio"
                    xmlns:ns6="http://www.bolivariano.com/mensaje/MensajeOTC"
                    xmlns:java="java"
                    exclude-result-prefixes="java ns6 tns xsl">
    	<xsl:template match="/">
    		<mmn:MensajeEntradaReverso>
    			<canal>
    				<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:canal"/>
    			</canal>
    			<fecha>
    				<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:fecha'/>
    			</fecha>
    			<oficina>
    				<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:oficina'/>
    			</oficina>
    			<terminal>
    				<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_term"]/valor'/>
    			</terminal>
    			<transaccion>
    				<xsl:text disable-output-escaping="no">62074</xsl:text>
    			</transaccion>
    			<usuario>
    				<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:usuario'/>
    			</usuario>
    			<banred>
    				<codigoOperador>
    					<xsl:text disable-output-escaping="no">000005390</xsl:text>
    				</codigoOperador>
    				<fechaCompensacion>
    					<xsl:value-of select='java:format(java:text.SimpleDateFormat.new("yyyyMMdd"), java:util.Date.new())'/>
    				</fechaCompensacion>
    				<fechaHoraBANRED>
    					<xsl:value-of select='java:format(java:text.SimpleDateFormat.new("yyyyMMddHHmmss"), java:util.Date.new())'/>
    				</fechaHoraBANRED>
    				<fechaTransaccionLocal>
    					<xsl:value-of select='java:format(java:text.SimpleDateFormat.new("yyyyMMdd"), java:util.Date.new())'/>
    				</fechaTransaccionLocal>
    				<horaTransaccionLocal>
    					<xsl:value-of select='java:format(java:text.SimpleDateFormat.new("HHmmss"), java:util.Date.new())'/>
    				</horaTransaccionLocal>
    				<indicadorReverso>
    					<xsl:text disable-output-escaping="no">02</xsl:text>
    				</indicadorReverso>
    				<institucionAdquirente>
    					<xsl:text disable-output-escaping="no">00597777</xsl:text>
    				</institucionAdquirente>
    				<numeroTerminal>
    					<xsl:text disable-output-escaping="no">0233000000VIRTUA</xsl:text>
    				</numeroTerminal>
    				<producto>
    					<xsl:text disable-output-escaping="no">0010031003</xsl:text>
    				</producto>
    				<secuencialAdquirente>
    					<xsl:value-of select='substring(/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_ssn"]/valor,2,6)'/>
    				</secuencialAdquirente>
    				<secuencialBANRED>
    					<xsl:value-of select='substring(/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_ssn"]/valor,2,6)'/>
    				</secuencialBANRED>
    				<tipoMoneda>
    					<xsl:text disable-output-escaping="no">840</xsl:text>
    				</tipoMoneda>
    				<tipoTransaccion>
    					<xsl:text disable-output-escaping="no">45109M</xsl:text>
    				</tipoTransaccion>
    				<transaccionOriginal>
    					<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_codigoProveedor']/valor"/>
    				</transaccionOriginal>
    			</banred>
    			<municipio>
    				<autorizacion>
    					<xsl:text disable-output-escaping="no">N</xsl:text>
    				</autorizacion>
    				<cantidadCheque>
    					<xsl:text disable-output-escaping="no">0</xsl:text>
    				</cantidadCheque>
    				<chequeComision>
    					<xsl:text disable-output-escaping="no">0.00</xsl:text>
    				</chequeComision>
    				<codigoComercio>
    					<xsl:text disable-output-escaping="no">2245</xsl:text>
    				</codigoComercio>
    				<codigoProveedor>
    					<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:servicio/codigoEmpresa"/>
    				</codigoProveedor>
    				<xsl:choose>
    					<xsl:when test="/ns6:entradaEjecutarReverso/ns6:canal = 'CNB' and (/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_forma_pago']/valor = 'EFE')">
    						<debito>
    							<xsl:text disable-output-escaping="no">0.00</xsl:text>
    						</debito>
    					</xsl:when>
    					<xsl:when test="/ns6:entradaEjecutarReverso/ns6:canal = 'CNB' and (/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_forma_pago']/valor = 'DEB')">
    						<debito>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:valorPago"/>
    						</debito>
    					</xsl:when>
    					<xsl:otherwise>
    						<debito>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:valorPago"/>
    						</debito>
    					</xsl:otherwise>
    				</xsl:choose>
    				<xsl:choose>
    					<xsl:when test="/ns6:entradaEjecutarReverso/ns6:canal = 'CNB' and (/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_forma_pago']/valor = 'EFE')">
    						<debitoComision>
    							<xsl:text disable-output-escaping="no">0.00</xsl:text>
    						</debitoComision>
    					</xsl:when>
    					<xsl:when test="/ns6:entradaEjecutarReverso/ns6:canal = 'CNB' and (/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_forma_pago']/valor = 'DEB')">
    						<debitoComision>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:valorComision"/>
    						</debitoComision>
    					</xsl:when>
    					<xsl:otherwise>
    						<debitoComision>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:valorComision"/>
    						</debitoComision>
    					</xsl:otherwise>
    				</xsl:choose>
    				<xsl:choose>
    					<xsl:when test="/ns6:entradaEjecutarReverso/ns6:canal = 'CNB' and (/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_forma_pago']/valor = 'EFE')">
    						<efectivo>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:valorPago"/>
    						</efectivo>
    					</xsl:when>
    					<xsl:otherwise>
    						<efectivo>
    							<xsl:text disable-output-escaping="no">0.00</xsl:text>
    						</efectivo>
    					</xsl:otherwise>
    				</xsl:choose>
    				<xsl:choose>
    					<xsl:when test="/ns6:entradaEjecutarReverso/ns6:canal = 'CNB' and (/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_forma_pago']/valor = 'EFE')">
    						<efectivoComision>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:valorComision"/>
    						</efectivoComision>
    					</xsl:when>
    					<xsl:otherwise>
    						<efectivoComision>
    							<xsl:text disable-output-escaping="no">0.00</xsl:text>
    						</efectivoComision>
    					</xsl:otherwise>
    				</xsl:choose>
    				<empresa>
    					<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:servicio/codigoConvenio"/>
    				</empresa>
    				<nombre>
    					<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:nombreCliente"/>
    				</nombre>
    				<numeroTarjeta>
    					<xsl:text disable-output-escaping="no">0.00</xsl:text>
    				</numeroTarjeta>
    				<opcion>
    					<xsl:text disable-output-escaping="no">T</xsl:text>
    				</opcion>
    				<secuencialRequerimiento>
    					<xsl:value-of select='substring(/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_ssn"]/valor,2,6)'/>
    				</secuencialRequerimiento>
    				<xsl:choose>
    					<xsl:when test='/ns6:entradaEjecutarReverso/ns6:servicio/codigoTipoIdentificador  = "01"'>
    						<suministro>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:servicio/identificador"/>
    						</suministro>
    					</xsl:when>
    				</xsl:choose>
    				<tipoMoneda>
    					<xsl:text disable-output-escaping="no">1</xsl:text>
    				</tipoMoneda>
    				<xsl:choose>
    					<xsl:when test='/ns6:entradaEjecutarReverso/ns6:servicio/codigoTipoIdentificador  = "01"'>
    						<tipoReferencia>
    							<xsl:text disable-output-escaping="no">004</xsl:text>
    						</tipoReferencia>
    					</xsl:when>
    					<xsl:otherwise>
    						<tipoReferencia>
    							<xsl:text disable-output-escaping="no">001</xsl:text>
    						</tipoReferencia>
    					</xsl:otherwise>
    				</xsl:choose>
    				<ubicacion>
    					<xsl:text disable-output-escaping="no">0</xsl:text>
    				</ubicacion>
    				<valorTotalCancelar>
    					<xsl:value-of select="format-number(/ns6:entradaEjecutarReverso/ns6:valorPago,'0.00')"/>
    				</valorTotalCancelar>
    				<cuenta>
    					<cuenta>
    						<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:cuenta'/>
    					</cuenta>
    					<idProducto>
    						<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:tipoCuenta'/>
    					</idProducto>
    					<tipoCuenta>
    						<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:tipoCuenta'/>
    					</tipoCuenta>
    					<servicio>
    						<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:servicio/codigoTipoIdentificador"/>
    					</servicio>
    				</cuenta>
    				<anioVigencia>
    					<!-- <xsl:text disable-output-escaping="no">9999</xsl:text>-->
    					<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:recibos/ns6:recibo/fecha"/>
    				</anioVigencia>
    				<xsl:choose>
    					<xsl:when test='/ns6:entradaEjecutarReverso/ns6:servicio/codigoTipoIdentificador  = "01"'>
    						<!-- <suministro>
                          <xsl:value-of select='substring(
                          concat("0000000000",/mmn:entradaEjecutarPago/municipio/suministro), string-length(/mmn:MensajeEntradaConsultar/municipio/suministro) + 1.0,10.0)'/>
                        </suministro>-->
    						<codigoCanal>4</codigoCanal>
    						<institucionAutorizadora>
    							<xsl:text disable-output-escaping="no">0233</xsl:text>
    						</institucionAutorizadora>
    					</xsl:when>
    					<xsl:when test='/ns6:entradaEjecutarReverso/ns6:servicio/codigoTipoIdentificador = "02"'>
    						<identificacion>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:servicio/identificador"/>
    						</identificacion>
    					</xsl:when>
    					<xsl:when test='/ns6:entradaEjecutarReverso/ns6:servicio/codigoTipoIdentificador = "03"'>
    						<codigoCanal>4</codigoCanal>
    						<codigoPHH>
    							<xsl:value-of select="substring(/ns6:entradaEjecutarReverso/ns6:servicio/identificador, 29,4)"/>
    						</codigoPHH>
    						<codigoPHV>
    							<xsl:value-of select="substring(/ns6:entradaEjecutarReverso/ns6:servicio/identificador, 24,4)"/>
    						</codigoPHV>
    						<division>
    							<xsl:value-of select="substring(/ns6:entradaEjecutarReverso/ns6:servicio/identificador, 18,5)"/>
    						</division>
    						<institucionAutorizadora>
    							<xsl:text disable-output-escaping="no">0233</xsl:text>
    						</institucionAutorizadora>
    						<lote>
    							<xsl:value-of select="substring(/ns6:entradaEjecutarReverso/ns6:servicio/identificador,12,5)"/>
    						</lote>
    						<manzana>
    							<xsl:value-of select="substring(/ns6:entradaEjecutarReverso/ns6:servicio/identificador, 6,5)"/>
    						</manzana>
    						<numeroCatastral>
    							<xsl:value-of select="substring(/ns6:entradaEjecutarReverso/ns6:servicio/identificador,34,3)"/>
    						</numeroCatastral>
    						<sector>
    							<xsl:value-of select="substring(/ns6:entradaEjecutarReverso/ns6:servicio/identificador, 1,4)"/>
    						</sector>
    					</xsl:when>
    					<xsl:when test='/ns6:entradaEjecutarReverso/ns6:servicio/codigoTipoIdentificador = "04"'>
    						<identificacion>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:servicio/identificador"/>
    						</identificacion>
    					</xsl:when>
    				</xsl:choose>
    				<semestre>
    					<xsl:text disable-output-escaping="no">3</xsl:text>
    				</semestre>
    				<xsl:if test='/ns6:entradaEjecutarPago/ns6:datosAdicionales/ns6:datoAdicional[codigo = "MPA_TC"]'>
    					<formaPago>
    						<tarjeta>
    							<tarjeta>
    								<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "MPA_TC"]/valor'/>
    							</tarjeta>
    							<valor>
    								<xsl:value-of select="format-number(/ns6:entradaEjecutarReverso/ns6:valorPago,'0.00')"/>
    							</valor>
    							<valorComision>
    								<xsl:value-of select="format-number(/ns6:entradaEjecutarReverso/ns6:valorComision,'0.00')"/>
    							</valorComision>
    							<mesesDiferido>
    								<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "FPA_TC"]/valor'/>
    							</mesesDiferido>
    						</tarjeta>
    					</formaPago>
    				</xsl:if>
    			</municipio>
    			<informacionCore>
    				<xsl:choose>
    					<xsl:when test="/ns6:entradaEjecutarReverso/ns6:canal = 'CNB'">
    						<modoCorreccion>
    							<xsl:text disable-output-escaping="no">S</xsl:text>
    						</modoCorreccion>
    						<reversoTransaccion>
    							<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "p_reversoTransaccion"]/valor'/>
    						</reversoTransaccion>
    					</xsl:when>
    					<xsl:otherwise>
    						<reversoTransaccion>
    							<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_ssn_reverse"]/valor'/>
    						</reversoTransaccion>
    					</xsl:otherwise>
    				</xsl:choose>
    				<rolBPM>
    					<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_rol"]/valor'/>
    				</rolBPM>
    				<sec>
    					<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_ssn"]/valor'/>
    				</sec>
    				<secuencial>
    					<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_ssn"]/valor'/>
    				</secuencial>
    				<servidor>
    					<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_srv"]/valor'/>
    				</servidor>
    			</informacionCore>
    			<xsl:choose>
    				<xsl:when test="/ns6:entradaEjecutarReverso/ns6:canal = 'CNB'">
    					<CNB>
    						<autorizacion>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_autorizacionCNB']/valor"/>
    						</autorizacion>
    						<comercio>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_comercio']/valor"/>
    						</comercio>
    						<terminalID>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_terminalID']/valor"/>
    						</terminalID>
    						<agencia>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_agencia']/valor"/>
    						</agencia>
    						<red>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = 'p_red']/valor"/>
    						</red>
    						<secuencial>
    							<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "s_ssn"]/valor'/>
    						</secuencial>
    						<valor>
    							<xsl:value-of select="/ns6:entradaEjecutarReverso/ns6:valorPago"/>
    						</valor>
    						<nombreCliente>
    							<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "p_nombreCliente"]/valor'/>
    						</nombreCliente>
    						<identificacionCliente>
    							<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "p_identificacionCliente"]/valor'/>
    						</identificacionCliente>
    						<modoCorreccion>
    							<xsl:text disable-output-escaping="no">S</xsl:text>
    						</modoCorreccion>
    						<reversoTransaccion>
                   				<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "p_reversoTransaccion"]/valor'/>
                   			</reversoTransaccion>
    						<tipoTransaccion>
    							<xsl:text disable-output-escaping="no">R</xsl:text>
    						</tipoTransaccion>
    						<formaPago>
    							<xsl:value-of select='/ns6:entradaEjecutarReverso/ns6:datosAdicionales/ns6:datoAdicional[codigo = "p_forma_pago"]/valor'/>
    						</formaPago>
    					</CNB>
    				</xsl:when>
    			</xsl:choose>
    		</mmn:MensajeEntradaReverso>
    	</xsl:template>
    </xsl:stylesheet>
  CEP_R_OUT.xsl: |
    <?xml version="1.0" encoding="UTF-8" ?>
    <?oracle-xsl-mapper <!-- SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY. -->
    <mapSources>
        <source type="XSD">
            <schema location="../CEP.xsd"/>
            <rootElement name="MensajeSalidaReverso" namespace="http://www.bolivariano.com/MensajeMunicipio"/>
        </source>
    </mapSources>
    <mapTargets>
    <target type="WSDL">
        <schema location="../otc-nopolicy.wsdl"/>
        <rootElement name="salidaEjecutarPago" namespace="http://www.bolivariano.com/ws/OTCService"/>
    </target>
    </mapTargets>
            <!-- GENERATED BY ORACLE XSL MAPPER 11.1.1.7.8(build 150622.2350.0222) AT [FRI MAY 25 18:06:35 COT 2018]. -->
            ?>
    <xsl:stylesheet version="1.0"
                    xmlns:mmn="http://www.bolivariano.com/MensajeMunicipio"
                    xmlns:ns9="http://www.bolivariano.com/mensaje/MensajeOTC"
                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                    xmlns:java="java"
                    exclude-result-prefixes="java xsl ns9 mmn">
    <xsl:template match="/">
        <xsl:choose>
            <xsl:when test="/mmn:MensajeSalidaReverso/informacionCore/sec!=''">
                <ns9:salidaEjecutarPago>
                    <ns9:codigoError>0</ns9:codigoError>
                    <ns9:fechaDebito>
                        <xsl:value-of select='java:format(java:text.SimpleDateFormat.new("yyyy-MM-dd&apos;T&apos;HH:mm:ss"), java:util.Date.new())'/>
                    </ns9:fechaDebito>
                    <xsl:variable name="fechaC"
                                  select="/mmn:MensajeSalidaReverso/municipio/fechaContable"/>
                    <ns9:fechaPago>
                        <xsl:value-of select="concat(substring($fechaC,1,4),'-',substring($fechaC,5,2),'-',substring($fechaC,7,2) )"/>
                    </ns9:fechaPago>
                    <!--<xsl:variable name="fechaP"
                                  select="/mmn:MensajeSalidaPago/municipio/fechaEfectiva"/>
                    <xsl:value-of select="concat(substring($fechaP,7,4),'-',substring($fechaP,1,2),'-',substring($fechaP,4,2) )"/> -->
                    <ns9:mensajeUsuario>Transaccion ok</ns9:mensajeUsuario>
                    <ns9:referencia>
                        <xsl:value-of select="/mmn:MensajeSalidaReverso/informacionCore/sec"/>
                    </ns9:referencia>
                </ns9:salidaEjecutarPago>
            </xsl:when>
            <xsl:otherwise>
                <ns9:salidaEjecutarPago>
                    <ns9:codigoError>
                        <xsl:value-of select="/mmn:MensajeSalidaReverso/codigoError"/>
                    </ns9:codigoError>
                    <ns9:mensajeUsuario>
                        <xsl:value-of select="/mmn:MensajeSalidaReverso/mensajeUsuario"/>
                    </ns9:mensajeUsuario>
                </ns9:salidaEjecutarPago>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    </xsl:stylesheet>
